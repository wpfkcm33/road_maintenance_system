<!-- frontend/public/index.html (ì§ì ‘ í™•ì¸ ë°©ì‹) -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#667eea" />
    <meta name="description" content="ë„ë¡œ ìœ ì§€ë³´ìˆ˜ ê´€ë¦¬ ì‹œìŠ¤í…œ - YOLO ê¸°ë°˜ AI ê· ì—´ ê²€ì¶œ" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <title>ë„ë¡œ ìœ ì§€ë³´ìˆ˜ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
  </head>
  <body>
    <noscript>JavaScriptë¥¼ í™œì„±í™”í•´ì•¼ ì´ ì•±ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</noscript>
    <div id="root"></div>
    
    <!-- ë””ë²„ê¹…ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
      console.log('ğŸš€ í˜ì´ì§€ ë¡œë“œ ì‹œì‘');
      
      // ì „ì—­ ìƒíƒœ ê´€ë¦¬
      window.naverMapReady = false;
      window.naverMapCallbacks = [];
      
      // API ìƒíƒœ í™•ì¸ í•¨ìˆ˜
      window.checkNaverAPI = function() {
        console.log('ğŸ” ë„¤ì´ë²„ API ìƒíƒœ í™•ì¸:');
        console.log('  - window.naver:', typeof window.naver);
        console.log('  - window.naver.maps:', typeof window.naver?.maps);
        console.log('  - window.naver.maps.Map:', typeof window.naver?.maps?.Map);
        
        if (window.naver?.maps?.Map) {
          console.log('  âœ… ëª¨ë“  í•„ìˆ˜ ê°ì²´ ì‚¬ìš© ê°€ëŠ¥');
          return true;
        } else {
          console.log('  âŒ í•„ìˆ˜ ê°ì²´ ì—†ìŒ');
          return false;
        }
      };
      
      // ê°•ì œ API ì¤€ë¹„ ì™„ë£Œ ì²˜ë¦¬
      window.forceNaverReady = function() {
        console.log('ğŸ”§ ê°•ì œ API ì¤€ë¹„ ì™„ë£Œ ì²˜ë¦¬');
        window.naverMapReady = true;
        window.dispatchEvent(new CustomEvent('naverMapReady'));
        
        // ëŒ€ê¸° ì¤‘ì¸ ì½œë°±ë“¤ ì‹¤í–‰
        window.naverMapCallbacks.forEach(callback => {
          try {
            callback();
          } catch (error) {
            console.error('ì½œë°± ì‹¤í–‰ ì˜¤ë¥˜:', error);
          }
        });
        window.naverMapCallbacks = [];
      };
      
      // ì½œë°± ë“±ë¡ í•¨ìˆ˜
      window.onNaverMapReady = function(callback) {
        if (window.naverMapReady) {
          callback();
        } else {
          window.naverMapCallbacks.push(callback);
        }
      };
      
      // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
      window.testNaverMap = function() {
        console.log('ğŸ§ª ë„¤ì´ë²„ ì§€ë„ í…ŒìŠ¤íŠ¸ ì‹œì‘');
        window.checkNaverAPI();
        
        if (window.naver?.maps?.Map) {
          const testDiv = document.createElement('div');
          testDiv.id = 'test-map-container';
          testDiv.style.cssText = 'width:250px;height:200px;position:fixed;top:10px;right:10px;z-index:9999;border:3px solid red;background:white;';
          document.body.appendChild(testDiv);
          
          try {
            const testMap = new window.naver.maps.Map('test-map-container', {
              center: new window.naver.maps.LatLng(37.3595704, 127.105399),
              zoom: 15
            });
            console.log('âœ… í…ŒìŠ¤íŠ¸ ì§€ë„ ìƒì„± ì„±ê³µ!');
            console.log('í…ŒìŠ¤íŠ¸ ì§€ë„ ê°ì²´:', testMap);
            
            setTimeout(() => {
              if (document.body.contains(testDiv)) {
                document.body.removeChild(testDiv);
              }
              console.log('ğŸ§ª í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
            }, 4000);
            
          } catch (error) {
            console.error('âŒ í…ŒìŠ¤íŠ¸ ì§€ë„ ìƒì„± ì‹¤íŒ¨:', error);
            if (document.body.contains(testDiv)) {
              document.body.removeChild(testDiv);
            }
          }
        } else {
          console.error('âŒ ë„¤ì´ë²„ ì§€ë„ API ê°ì²´ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
        }
      };
      
      // ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬
      window.navermap_authFailure = function () {
        console.error('âŒ ë„¤ì´ë²„ ì§€ë„ API ì¸ì¦ ì‹¤íŒ¨');
        alert('ë„¤ì´ë²„ ì§€ë„ API ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\nAPI í‚¤: 9j0o3701nw\ní™•ì¸ í•„ìš” ì‚¬í•­:\n1. API í‚¤ ìœ íš¨ì„±\n2. ë„ë©”ì¸ ë“±ë¡\n3. ì‚¬ìš©ëŸ‰ ì œí•œ');
      };
      
      // API ì´ˆê¸°í™” ì½œë°± (ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í˜¸ì¶œ)
      window.initNaverMaps = function() {
        console.log('ğŸ¯ initNaverMaps ì½œë°± í•¨ìˆ˜ í˜¸ì¶œë¨!');
        window.checkNaverAPI();
        
        if (window.naver?.maps?.Map) {
          console.log('âœ… ë„¤ì´ë²„ ì§€ë„ API ì´ˆê¸°í™” ì™„ë£Œ!');
          window.forceNaverReady();
        } else {
          console.error('âŒ initNaverMaps í˜¸ì¶œë˜ì—ˆì§€ë§Œ API ê°ì²´ ì—†ìŒ');
        }
      };
      
      // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ API ìƒíƒœ í™•ì¸
      window.addEventListener('load', function() {
        console.log('ğŸ“„ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
        
        // 1ì´ˆ í›„ API ìƒíƒœ í™•ì¸
        setTimeout(() => {
          console.log('â° 1ì´ˆ í›„ API ìƒíƒœ í™•ì¸');
          window.checkNaverAPI();
          
          if (window.naver?.maps?.Map) {
            console.log('ğŸ‰ API ìë™ ê°ì§€ ì„±ê³µ!');
            window.forceNaverReady();
          }
        }, 1000);
        
        // 3ì´ˆ í›„ ì¬í™•ì¸
        setTimeout(() => {
          console.log('â° 3ì´ˆ í›„ API ì¬í™•ì¸');
          if (!window.naverMapReady) {
            window.checkNaverAPI();
            if (window.naver?.maps?.Map) {
              console.log('ğŸ”„ ì§€ì—°ëœ API ê°ì§€ ì„±ê³µ!');
              window.forceNaverReady();
            } else {
              console.error('âŒ 3ì´ˆ í›„ì—ë„ API ì—†ìŒ');
            }
          }
        }, 3000);
      });
      
      // ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ëª¨ë‹ˆí„°ë§
      let scriptLoadAttempts = 0;
      const monitorScriptLoad = () => {
        scriptLoadAttempts++;
        console.log(`ğŸ“Š ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ëª¨ë‹ˆí„°ë§ #${scriptLoadAttempts}`);
        
        if (window.naver?.maps?.Map) {
          console.log('âœ… ëª¨ë‹ˆí„°ë§ìœ¼ë¡œ API ê°ì§€!');
          window.forceNaverReady();
          return;
        }
        
        if (scriptLoadAttempts < 30) { // ìµœëŒ€ 15ì´ˆ
          setTimeout(monitorScriptLoad, 500);
        } else {
          console.error('âŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ëª¨ë‹ˆí„°ë§ íƒ€ì„ì•„ì›ƒ');
        }
      };
      
      // ëª¨ë‹ˆí„°ë§ ì‹œì‘
      setTimeout(monitorScriptLoad, 500);
    </script>
    
    <!-- ë„¤ì´ë²„ ì§€ë„ API ë¡œë“œ -->
    <script 
      type="text/javascript" 
      src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=9j0o3701nw&callback=initNaverMaps"
      onload="console.log('ğŸ“ ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ onload ì´ë²¤íŠ¸');"
      onerror="console.error('âŒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì˜¤ë¥˜');"
    ></script>
  </body>
</html>